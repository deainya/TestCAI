# Запрос на обслуживание - Streamlit App

Простое приложение для создания заявок на обслуживание оборудования с интеграцией LLM через N8N.

## Функциональность

- ✅ Валидация email пользователя
- ✅ Чат-интерфейс для сбора информации о проблеме
- ✅ Интеграция с N8N для обработки LLM
- ✅ Автоматическое извлечение данных заявки
- ✅ Умные вопросы ассистента
- ✅ Индикатор прогресса сбора данных
- ✅ Формирование итогового запроса
- ✅ Подтверждение пользователя перед отправкой
- ✅ Обработка ошибок и уведомления
- ✅ Мобильная версия

## Установка и запуск локально

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Установите переменную окружения:
```bash
export N8N_WEBHOOK_URL="https://your-n8n-instance.com/webhook/your-webhook-id"
```

3. Запустите приложение:
```bash
streamlit run app.py
```

## Деплой на Streamlit Community Cloud

1. Загрузите код в GitHub репозиторий
2. Подключите репозиторий к Streamlit Community Cloud
3. Установите переменную окружения `N8N_WEBHOOK_URL` в настройках приложения
4. Деплой произойдет автоматически

## Переменные окружения

- `N8N_WEBHOOK_URL` - URL webhook N8N для интеграции с LLM

## Структура проекта

```
├── app.py              # Основное приложение
├── requirements.txt    # Зависимости Python
└── README.md          # Документация
```

## Интеграция с N8N

Приложение отправляет POST запросы в N8N со следующей структурой:

### Запрос к N8N:
```json
{
  "message": "Текст сообщения пользователя",
  "user_email": "user@example.com",
  "timestamp": "2024-01-01T12:00:00",
  "session_id": "user@example.com_20240101_120000"
}
```

### Ожидаемый ответ от N8N:
```json
{
  "response": "Ответ LLM ассистента"
}
```

## Особенности

- Мобильная версия с адаптивным дизайном
- Умное извлечение данных из текста
- Прогрессивный сбор информации
- Обработка различных типов ошибок
- Автоматическая очистка данных после отправки
